<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" content="${_csrf.token}"/>
	<meta name="_csrf_header" content="${_csrf.headerName}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOGIYUK</title>

<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/assets/css/bootstrap.css">
    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/assets/vendors/chartjs/Chart.min.css">
    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/assets/vendors/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="${pageContext.request.contextPath}/resources/assets/css/app.css">
    <link rel="shortcut icon" href="${pageContext.request.contextPath}/resources/assets/images/favicon.svg" type="image/x-icon">

<!-- sweetalert2 -->
	<script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>    

<style>
	.color:hover{
		background-color: lightgray;
	}
	
	
</style>    
</head>
<body>
    
    <jsp:include page="../inc/sidebar.jsp" />
    
    <div style="margin-left: 20px;">
    <h1><b>Ï∞ΩÍ≥† Í¥ÄÎ¶¨</b></h1>
  	<br>

<form action="${pageContext.request.contextPath}/warehouse/warehouse">  	
  <div class="col-lg-2 col-3" style="display: flex; align-items: center; white-space: nowrap;">
<!--   	flex: 0 1 auto; ÏÜçÏÑ±ÏùÄ ÏÇ¨ÏõêÎ≤àÌò∏ ÌÖçÏä§Ìä∏Í∞Ä ÌïÑÏöîÌïú ÎßåÌÅºÏùò Í≥µÍ∞ÑÎßå Ï∞®ÏßÄ -->
  <div style="flex: 0 1 auto; margin-right: 10px;"><b>Ï∞ΩÍ≥†ÏΩîÎìú</b></div>
  <input type="text" id="warehouseCode" class="form-control" name="warehouseCode" style="flex: 1 1 auto; width: auto; background-color: white;" onclick="warehouseCodePopup()" readonly placeholder="Ï∞ΩÍ≥†ÏΩîÎìúÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>Ï∞ΩÍ≥†Î™Ö</b> &nbsp;&nbsp;
  <input type="text" id="warehouseName" class="form-control" name="warehouseName" style="flex: 1 1 auto; width: auto;" placeholder="Ï∞ΩÍ≥†Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>ÏßÄÏó≠</b> &nbsp;&nbsp;
  <input type="text" id="warehouseLocal" class="form-control" name="warehouseLocal" style="flex: 1 1 auto; width: auto;" placeholder="ÏßÄÏó≠ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <button class="btn btn-primary btn-sm" type="submit">Ï°∞Ìöå</button>
</div>
</form>
<br>
    
    
<!--     Bordered table start -->
<div class="row" id="table-bordered" style="margin-right: 20px;">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title"><b>Ï¥ù ${warehouseList.size() }Í±¥</b></h4>
      </div>
      <div class="card-content">
        <!-- table bordered -->
        <div class="table-responsive">
        
        <form id="dataForm" class="insertWarehouse" action="${pageContext.request.contextPath}/warehouse/warehouseInsertPro" method="post">
            <div class="card-header" style="text-align: right;">
			    <button type="button" onclick="addTableRow()" class='btn btn-primary' id="addrow">‚ûï Ï∂îÍ∞Ä</button>
			    <button type="button" onclick="modTableRow()" class='btn btn-primary' id="modify">‚Ü™Ô∏è ÏàòÏ†ï</button>
			    <button type="button" onclick="delTableRow()" class='btn btn-primary' id="delete">‚ö†Ô∏è ÏÇ≠Ï†ú</button>
			    <button type="submit" class='btn btn-primary' id="submitrow" disabled>üíæ Ï†ÄÏû•</button>
            </div>
          <table class="table table-bordered mb-0" id="table1">
            <thead>
              <tr>
                <th>Ï∞ΩÍ≥†ÏΩîÎìú</th>
                <th>Ï∞ΩÍ≥†Î™Ö</th>
                <th>ÌòÑÏû¨ Î≥¥Ïú†Îüâ</th>
                <th>ÏµúÎåÄ Î≥¥Ïú†Îüâ</th>
                <th>Íµ¨Ïó≠(ÏÑπÌÑ∞)</th>
                <th>ÏßÄÏó≠</th>
                <th>Ï†ÑÌôîÎ≤àÌò∏</th>
                <th style="width: 0px;"></th>
              </tr>
            </thead>
            <tbody>
             <c:forEach var="warehouseDTO" items="${warehouseList }">
              <tr class="color" >
                <td>${warehouseDTO.warehouseCode }</td>
                <td>${warehouseDTO.warehouseName }</td>
                <td>${warehouseDTO.productVol }</td>
                <td>${warehouseDTO.warehouseMvol }</td>
                <td>${warehouseDTO.warehouseArea }</td>
                <td>${warehouseDTO.warehouseLocal }</td>
                <td>${warehouseDTO.warehouseTelNumber }</td>
                <td></td>
              </tr>
              </c:forEach>
            </tbody>
          </table>
          
           <!-- 			ÌéòÏù¥Ïßï ÏãúÏûë -->
<nav aria-label="Page navigation example">

	<ul class="pagination pagination-primary justify-content-end">
	
	<c:if test="${pageDTO.startPage > 1}">
		<li class="page-tiem">
			<a class="page-link" href="${pageContext.request.contextPath}/bound/outBound?pageNum=${pageDTO.startPage - 1}
			&search9=${pageDTO.search9}&search10=${pageDTO.search10}&search11=${pageDTO.search11}&search12=${pageDTO.search12}
			&select1=${pageDTO.select1}">
			<span aria-hidden="true">
				<i data-feather="chevron-left"></i></span></a>
		</li>
	</c:if>
	
	<c:if test="${pageDTO.startPage <= 1}">
		<li class="page-item disabled">
			<a class="page-link" href="#" tabindex="-1" aria-disabled="true">
			<span aria-hidden="true">
				<i data-feather="chevron-left"></i></span></a>
        </li>
    </c:if>

	<c:forEach var="i" begin="${pageDTO.startPage}" end="${pageDTO.endPage}" step="1">
		<li class="page-item ${pageDTO.currentPage == i ? 'active' : ''}">
			<a class="page-link" href="${pageContext.request.contextPath}/warehouse/warehouse?pageNum=${i}
			&search9=${pageDTO.search9}&search10=${pageDTO.search10}&search11=${pageDTO.search11}&search12=${pageDTO.search12}
			&select1=${pageDTO.select1}">${i}</a>
		</li>
	</c:forEach>

	<c:if test="${pageDTO.endPage < pageDTO.pageCount}">
		<li class="page-item">
			<a class="page-link" href="${pageContext.request.contextPath}/warehouse/warehouse?pageNum=${pageDTO.endPage + 1}
			&search9=${pageDTO.search9}&search10=${pageDTO.search10}&search11=${pageDTO.search11}&search12=${pageDTO.search12}
			&select1=${pageDTO.select1}">
			<span aria-hidden="true">
				<i data-feather="chevron-right"></i></span></a>
		</li>
	</c:if>
	
    <c:if test="${pageDTO.endPage >= pageDTO.pageCount}">
		<li class="page-item disabled">
			<a class="page-link" href="#">
			<span aria-hidden="true">
				<i data-feather="chevron-right"></i></span></a>
		</li>
    </c:if>
	
	</ul>

</nav>
<!-- 			ÌéòÏù¥Ïßï ÎÅù -->  
          
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Bordered table end -->
    
</div>    

<nav aria-label="Page navigation example">
	<ul class="pagination pagination-primary" style="justify-content:center;">
		<li class="page-item">
			<a class="page-link" href="#">
		<span aria-hidden="true"><i data-feather="chevron-left"></i></span>
			</a>
		</li>
			<li class="page-item"><a class="page-link" href="">1</a></li>
			<li class="page-item active"><a class="page-link" href="">2</a></li>
			<li class="page-item"><a class="page-link" href="">3</a></li>
			<li class="page-item"><a class="page-link" href="">
		<span aria-hidden="true"><i data-feather="chevron-right"></i></span>
			</a>
		</li>
	</ul>
</nav>


<!-- <nav aria-label="Page navigation example" style="margin-bottom:50px;" > -->
<!--   <ul class="pagination justify-content-center"> -->
<%--   <c:if test="${pageDTO.startPage > pageDTO.pageBlock }"> --%>
<%--     <li class="page-item"><a class="page-link" href="${pageContext.request.contextPath}/admin/qna?pageNum=${pageDTO.startPage - pageDTO.pageBlock}">Previous</a></li> --%>
<%--   </c:if> --%>
  
<%--   <c:forEach var="i" begin="${pageDTO.startPage }" end="${pageDTO.endPage }" step="1"> --%>
<%--     <li class="page-item"><a class="page-link" href="${pageContext.request.contextPath}/admin/qna?pageNum=${i}">${i }</a></li> --%>
<%--   </c:forEach> --%>
  
<%--   <c:if test="${pageDTO.endPage < pageDTO.pageCount }"> --%>
<%--     <li class="page-item"><a class="page-link" href="${pageContext.request.contextPath}/admin/qna?pageNum=${pageDTO.startPage + pageDTO.pageBlock}">Next</a></li> --%>
<%--   </c:if>   --%>
<!--   </ul> -->
<!-- </nav> -->
    <script src="${pageContext.request.contextPath}/resources/assets/js/feather-icons/feather.min.js"></script>
    <script src="${pageContext.request.contextPath}/resources/assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="${pageContext.request.contextPath}/resources/assets/js/app.js"></script>
    <script src="${pageContext.request.contextPath}/resources/assets/vendors/chartjs/Chart.min.js"></script>
    <script src="${pageContext.request.contextPath}/resources/assets/vendors/apexcharts/apexcharts.min.js"></script>
    <script src="${pageContext.request.contextPath}/resources/assets/js/pages/dashboard.js"></script>
    <script src="${pageContext.request.contextPath}/resources/assets/js/main.js"></script>
    
    <script>
    function warehouseCodePopup(){window.open("${pageContext.request.contextPath}/warehouse/warehouseCodePopup","","width=1300, height=700, left=100, top=50");}
    </script>
    
    <script>
    function receive(warehouseCode, warehouseName, warehouseLocal){
    	document.getElementById("warehouseCode").value=warehouseCode;
    	document.getElementById("warehouseName").value=warehouseName;
    	documnet.getElementById("warehouseLocal").value=warehouseLocal;
    }
    </script>

<script>
    function addTableRow() {
//     	alert(200);
        const table = document.getElementById("table1").getElementsByTagName('tbody')[0];
        const newRow = table.insertRow(0);
        const rowId = table.rows.length; // Ìñâ IDÎ°ú ÏÇ¨Ïö©Îê† Í∞í
        
        // Í∞Å Ïó¥Ïóê ÎåÄÌïú ÏÖÄÍ≥º ÏûÖÎ†• ÌïÑÎìú ÏÉùÏÑ±
        const fields = ['warehouseCode', 'warehouseName','productVol', 'warehouseMvol', 'warehouseArea','warehouseLocal','warehouseTelNumber','${_csrf.parameterName}'];
        const exampleData = ['${warehouseDTO.warehouseCode}', '','','','','','','${_csrf.token}'];

        fields.forEach((field, index) => {
            const cell = newRow.insertCell(index);
            let input;

            // Ïù∏Ìíã ÌÉÄÏûÖ Î≥ÄÍ≤Ω
            if (field === 'warehouseArea') {
            	input = document.createElement("input");
                input.type = "text";
                input.className = "form-control";
                }
      			  else if(field === 'warehouseCode'){
                    input = document.createElement("input");
                    input.type = "text";
                    input.className = "form-control";
                    input.readOnly = true; //ÏûÖÎ†• ÌïÑÎìúÎ•º ÏùΩÍ∏∞ Ï†ÑÏö©ÏúºÎ°ú ÏÑ§Ï†ï
                    
                } else if(field === 'warehouseName'){
                    input = document.createElement("input");
                    input.type = "text";
                    input.className = "form-control";
                    
                } else if(field === 'productVol'){
                	input = document.createElement("input");
                	input.type = "text";
                	input.className = "form-control";
                
            }else if(field === 'warehouseMvol'){
                input = document.createElement("input");
                input.type = "text";
                input.className = "form-control";
                
            }else if(field === 'warehouseLocal'){
                input = document.createElement("input");
                input.type = "text";
                input.className = "form-control";
            }
            
            else {
                input = document.createElement("input");
                input.type = "text";
                input.className = "form-control";
            }

            input.name = field;
            input.value = exampleData[index];
            cell.appendChild(input);
        });

        // 'Ï∂îÍ∞Ä' Î≤ÑÌäºÏùÑ 'Ï∑®ÏÜå' Î≤ÑÌäºÏúºÎ°ú Î≥ÄÍ≤ΩÌïòÎ©¥ÏÑú idÍ∞íÎèÑ Î≥ÄÍ≤Ω
        const addButton = document.querySelector('#addrow');
        addButton.textContent = '‚úñÔ∏è Ï∑®ÏÜå';
        addButton.id = 'cancelrow';
        addButton.onclick = function() { cancelAddition(newRow); };

        document.getElementById('submitrow').disabled = false; // Ï†ÄÏû• Î≤ÑÌäº ÌôúÏÑ±Ìôî
        document.getElementById('modify').disabled = true; // ÏàòÏ†ï Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
        document.getElementById('delete').disabled = true; // ÏÇ≠Ï†ú Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
    }

    function cancelAddition(row) {
        // Ï∂îÍ∞ÄÎêú Ìñâ ÏÇ≠Ï†ú
        row.remove();

        // Î≤ÑÌäºÏùÑ Îã§Ïãú 'Ï∂îÍ∞Ä'Î°ú Î≥ÄÍ≤ΩÌïòÎ©¥ÏÑú idÍ∞íÎèÑ ÏõêÎûòÎåÄÎ°ú Î≥ÄÍ≤Ω
        const addButton = document.querySelector('#cancelrow');
        addButton.textContent = '‚ûï Ï∂îÍ∞Ä';
        addButton.id = 'addrow';
        addButton.onclick = addTableRow;

        document.getElementById('submitrow').disabled = true; // Ï†ÄÏû• Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
        document.getElementById('modify').disabled = false; // ÏàòÏ†ï Î≤ÑÌäº ÌôúÏÑ±Ìôî
        document.getElementById('delete').disabled = false; // ÏÇ≠Ï†ú Î≤ÑÌäº ÌôúÏÑ±Ìôî
    }
    </script>
    
<script>
    let isEditMode = false;
    let selectedRow = null;
    let originalHTML = {}; // ÏõêÎûò ÏÖÄÏùò HTMLÏùÑ Ï†ÄÏû•Ìï† Í∞ùÏ≤¥

    document.addEventListener('DOMContentLoaded', function() {
        const table = document.getElementById('table1');
        const tbody = table.querySelector('tbody'); // Ï∞æÏùÄ ÌÖåÏù¥Î∏î ÎÇ¥Ïùò tbody ÏöîÏÜåÎ•º Ï∞æÏùå
        tbody.addEventListener('click', function(e) {
            if (isEditMode) {
                let target = e.target;
                while (target != table && target.tagName !== 'TR') {
                    target = target.parentNode;
                }
                if (target.tagName === 'TR') {
                    // ÌòÑÏû¨ ÌñâÏù¥ Ïù¥ÎØ∏ ÏÑ†ÌÉùÎêòÏñ¥ ÏàòÏ†ï Î™®ÎìúÏù∏ Í≤ΩÏö∞, ÏïÑÎ¨¥Îü∞ ÎèôÏûëÎèÑ ÏàòÌñâÌïòÏßÄ ÏïäÏùå
                    if (selectedRow === target) {
                        return; // Ìï®Ïàò Ïã§ÌñâÏùÑ Ïó¨Í∏∞ÏÑú Ï§ëÎã®
                    }

                    // Îã§Î•∏ ÌñâÏù¥ ÏÑ†ÌÉùÎêòÏñ¥ ÏûàÎäî Í≤ΩÏö∞, Ïù¥Ï†Ñ ÌñâÏùÑ ÏõêÎûò ÏÉÅÌÉúÎ°ú ÎêòÎèåÎ¶º
                    if (selectedRow && selectedRow !== target) {
                        revertRow(selectedRow); // Ïù¥Ï†ÑÏóê ÏÑ†ÌÉùÎêú ÌñâÏùÑ ÏõêÎûò ÏÉÅÌÉúÎ°ú ÎêòÎèåÎ¶º
                    }
                    selectedRow = target; // ÏÉàÎ°ú ÏÑ†ÌÉùÎêú ÌñâÏùÑ ÌòÑÏû¨ ÏÑ†ÌÉùÎêú ÌñâÏúºÎ°ú ÏÑ§Ï†ï
                    makeRowEditable(selectedRow); // ÏÑ†ÌÉùÎêú ÌñâÏùÑ ÏàòÏ†ï Í∞ÄÎä•Ìïú ÏÉÅÌÉúÎ°ú ÎßåÎì¶
                }
            }
        });
    });

    function modTableRow() {
        isEditMode = true;
        // ÏàòÏ†ï Î≤ÑÌäºÏùÑ Ï∑®ÏÜå Î≤ÑÌäºÏúºÎ°ú Î≥ÄÍ≤Ω
        const modifyButton = document.getElementById('modify');
        modifyButton.textContent = '‚Ü©Ô∏è Ï∑®ÏÜå';
        modifyButton.onclick = canMod; // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º canMod Ìï®ÏàòÎ°ú Î≥ÄÍ≤Ω

        Swal.fire({
        	  title: "ÏàòÏ†ïÌï† ÌñâÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.",
        	  width: 600,
        	  padding: "3em",
        	  color: "#00ff0000",
        	  background: "#fff",
        	  backdrop: `
        	    rgba(ff,ff,ff,0)
        	    left top
        	    no-repeat
        	  `
        	});

        document.getElementById('addrow').disabled = true; // Ï∂îÍ∞Ä Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
        document.getElementById('delete').disabled = true;// Ï∂îÍ∞Ä Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
        
        // Ï†ÄÏû• Î≤ÑÌäº ÌôúÏÑ±Ìôî Î∞è Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
        const submitButton = document.getElementById('submitrow');
        submitButton.disabled = false; // Ï†ÄÏû• Î≤ÑÌäº ÌôúÏÑ±Ìôî
        submitButton.onclick = function(event) {
            event.preventDefault(); // Í∏∞Î≥∏ Ìèº Ï†ÑÏÜ° Ï∑®ÏÜå

            // Ìèº Í∞ùÏ≤¥Î•º Í∞ÄÏ†∏ÏòµÎãàÎã§.
            var form = document.getElementById('dataForm'); // ÌèºÏùò ID

            // ÌèºÏùò action ÏÜçÏÑ±ÏùÑ ÏÉàÎ°úÏö¥ Ï£ºÏÜåÎ°ú Î≥ÄÍ≤ΩÌï©ÎãàÎã§.
            form.action = '${pageContext.request.contextPath}/warehouse/warehouseUpdatePro'; // ÏÉàÎ°úÏö¥ Ï£ºÏÜåÎ°ú Î≥ÄÍ≤Ω

            // ÌèºÏùÑ ÏàòÎèôÏúºÎ°ú Ï†ÑÏÜ°Ìï©ÎãàÎã§.
            form.submit();
        };
    }

    function canMod() {
        isEditMode = false;
        if (selectedRow) {
            revertRow(selectedRow); // ÏÑ†ÌÉùÎêú ÌñâÏùÑ ÏõêÎûò ÏÉÅÌÉúÎ°ú ÎêòÎèåÎ¶º
        }
        selectedRow = null;
        
        // Ï∑®ÏÜå Î≤ÑÌäºÏùÑ Îã§Ïãú ÏàòÏ†ï Î≤ÑÌäºÏúºÎ°ú Î≥ÄÍ≤Ω
        const modifyButton = document.getElementById('modify');
        modifyButton.textContent = '‚Ü™Ô∏è ÏàòÏ†ï';
        modifyButton.onclick = modTableRow; // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º Îã§Ïãú modTableRow Ìï®ÏàòÎ°ú Î≥ÄÍ≤Ω
        
        
        document.getElementById('addrow').disabled = false; // Ï∂îÍ∞Ä Î≤ÑÌäºÏùÑ Îã§Ïãú ÌôúÏÑ±Ìôî
        document.getElementById('delete').disabled = false; // ÏÇ≠Ï†ú Î≤ÑÌäº Îã§Ïãú ÌôúÏÑ±Ìôî
        document.getElementById('submitrow').disabled = true; // Ï†ÄÏû• Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
    }

    function revertRow(row) {
        Object.keys(originalHTML).forEach((index) => {
            const cell = row.cells[index];
            cell.innerHTML = originalHTML[index]; // ÏõêÎ≥∏ HTMLÎ°ú Î≥µÏõê
        });
        originalHTML = {}; // ÏÇ¨Ïö© ÌõÑ Í∞ùÏ≤¥ Ï¥àÍ∏∞Ìôî
    }

    function makeRowEditable(row) {
        isDelMode = false;
        originalHTML = {}; // ÌòÑÏû¨ ÌñâÏóê ÎåÄÌïú ÏõêÎ≥∏ HTML Ï†ÄÏû•ÏùÑ ÏúÑÌï¥ Í∞ùÏ≤¥ Ï¥àÍ∏∞Ìôî
        const cellIndex = [0, 1, 2, 3, 4, 5, 6, 7]; // ÏàòÏ†ïÌï† Ïó¥ Ïù∏Îç±Ïä§ (2Ïó¥Í≥º 5Ïó¥)
        cellIndex.forEach((index) => {
            const cell = row.cells[index];
            originalHTML[index] = cell.innerHTML; // ÏàòÏ†ï Ï†Ñ ÏõêÎ≥∏ HTMLÏùÑ Ï†ÄÏû•
            const originalText = cell.textContent.trim();
            
            // 1Ïó¥(Ïù∏Îç±Ïä§ 0)Ïùò Í≤ΩÏö∞, ÌÖçÏä§Ìä∏ ÏûÖÎ†• ÌïÑÎìúÎ•º ÏÉùÏÑ±
	       if (index === 0) {
	            const input = document.createElement('input');
	            input.type = 'hidden'; // ÏûÖÎ†• ÌïÑÎìú ÌÉÄÏûÖÏùÑ hiddenÏúºÎ°ú ÏÑ§Ï†ï
	            input.name = 'warehouseCode'; // ÏöîÍµ¨ÏÇ¨Ìï≠Ïóê ÎßûÍ≤å Ïù¥Î¶Ñ ÏÑ§Ï†ï
	            input.value = originalText; // ÏòàÎ•º Îì§Ïñ¥, ÌñâÏùò Í≥†Ïú† ID Í∞í
	            cell.appendChild(input); // Ïà®Í≤®ÏßÑ ÏûÖÎ†• ÌïÑÎìú Ï∂îÍ∞Ä
	       }
            // 2Ïó¥(Ïù∏Îç±Ïä§ 1)Ïùò Í≤ΩÏö∞, ÌÖçÏä§Ìä∏ ÏûÖÎ†• ÌïÑÎìúÎ•º ÏÉùÏÑ±
			else if (index === 1) {
                const input = document.createElement('input');
                input.type = 'text';
                input.name = 'warehouseName';
                input.className = 'form-control';
                input.value = originalText;
                cell.innerHTML = '';
                cell.appendChild(input);
            }
			else if (index === 2) {
                const input = document.createElement('input');
                input.type = 'text';
                input.name = 'productVol';
                input.className = 'form-control';
                input.value = originalText;
                cell.innerHTML = '';
                cell.appendChild(input);
            }
			else if (index === 3) {
                const input = document.createElement('input');
                input.type = 'text';
                input.name = 'warehouseMvol';
                input.className = 'form-control';
                input.value = originalText;
                cell.innerHTML = '';
                cell.appendChild(input);
            }
			else if (index === 4) {
                const input = document.createElement('input');
                input.type = 'text';
                input.name = 'warehouseArea';
                input.className = 'form-control';
                input.value = originalText;
                cell.innerHTML = '';
                cell.appendChild(input);
            }
			else if (index === 5) {
                const input = document.createElement('input');
                input.type = 'text';
                input.name = 'warehouseLocal';
                input.className = 'form-control';
                input.value = originalText;
                cell.innerHTML = '';
                cell.appendChild(input);
            }
			else if (index === 6) {
                const input = document.createElement('input');
                input.type = 'text';
                input.name = 'warehouseTelNumber';
                input.className = 'form-control';
                input.value = originalText;
                cell.innerHTML = '';
                cell.appendChild(input);
            }
			else if (index === 7) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = '${_csrf.parameterName}';
                input.className = 'form-control';
                input.value = '${_csrf.token}';
                cell.appendChild(input);
            }
        });
    }
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const table = document.getElementById('table1');
    const tbody = table.querySelector('tbody');
    tbody.addEventListener('click', function(e) {
        if (isDelMode) {
            let target = e.target;
            Swal.fire({
                title: "ÏÇ≠Ï†ú ÌïòÏãúÍ≤†ÏäµÎãàÍπå?",
                icon: "Ï£ºÏùò",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!"
            }).then((result) => {
                if (result.isConfirmed) {
                    // ÏÇ≠Ï†ú ÏäπÏù∏ ÌõÑ ÌñâÏùò Ï≤´ Î≤àÏß∏ Ïó¥ Í∞í Í∞ÄÏ†∏Ïò§Í∏∞
                    while (target != table && target.tagName !== 'TR') {
                        target = target.parentNode;
                    }
                    if (target.tagName === 'TR') {
                        const firstColumnValue = target.cells[0].textContent || target.cells[0].innerText; // Ï≤´ Î≤àÏß∏ Ïó¥ Í∞í
                        
                        var token = document.querySelector('meta[name="_csrf"]').getAttribute('content');
                        var header = document.querySelector('meta[name="_csrf_header"]').getAttribute('content');
                        
                        // ÏÑúÎ≤ÑÎ°ú Ï≤´ Î≤àÏß∏ Ïó¥ Í∞íÏùÑ POST ÏöîÏ≤≠ÏúºÎ°ú Ï†ÑÏÜ°
                        fetch('${pageContext.request.contextPath}/warehouse/warehouseDeletePro', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                [header]: token // CSRF ÌÜ†ÌÅ∞ Ï∂îÍ∞Ä
                            },
                            body: JSON.stringify({ warehouseCode: firstColumnValue }) // ÏÑúÎ≤ÑÏóê Ï†ÑÏÜ°Ìï† Îç∞Ïù¥ÌÑ∞
                        })
                        .then(response => {
                            if(response.ok) {
                                tbody.removeChild(target); // ÏÑúÎ≤ÑÏóêÏÑú ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï≤òÎ¶¨ÎêòÎ©¥ Ìñâ ÏÇ≠Ï†ú
                                Swal.fire(
                                    "ÏÇ≠Ï†úÏôÑÎ£å!"
                                );
                                isDelMode = true; // ÏÇ≠Ï†ú Î™®Îìú ÎπÑÌôúÏÑ±Ìôî
                            } else {
                                // ÏÑúÎ≤Ñ Ï≤òÎ¶¨ Ïã§Ìå® Ïãú
                                Swal.fire(
                                    "ÏóêÎü¨Î∞úÏÉù!",
                                    "ÏÇ≠Ï†ú Ìï† Ïàò ÏóÜÏäµÎãàÎã§.",
                                );
                            }
                        })
                        .catch((error) => {
                            console.error('Error:', error);
                        });
                    }
                }
            });
        }
    });
});

function delTableRow() {
    isEditMode = false;
    isDelMode = true;
    
    Swal.fire({
  	  title: "ÏÇ≠Ï†úÌï† ÌñâÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.",
  	  width: 600,
  	  padding: "3em",
  	  color: "#00ff0000",
  	  background: "#fff",
  	  backdrop: `
  	    rgba(ff,ff,ff,0)
  	    left top
  	    no-repeat
  	  `
  	});
    
    document.getElementById('addrow').disabled = true; // Ï∂îÍ∞Ä Î≤ÑÌäºÏùÑ Îã§Ïãú ÌôúÏÑ±Ìôî
    document.getElementById('modify').disabled = true; // ÏÇ≠Ï†ú Î≤ÑÌäº Îã§Ïãú ÌôúÏÑ±Ìôî
    
 	// ÏàòÏ†ï Î≤ÑÌäºÏùÑ Ï∑®ÏÜå Î≤ÑÌäºÏúºÎ°ú Î≥ÄÍ≤Ω
    const modifyButton = document.getElementById('delete');
    modifyButton.textContent = '‚úñÔ∏è Ï∑®ÏÜå';
    modifyButton.onclick = canMod2; // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º canMod Ìï®ÏàòÎ°ú Î≥ÄÍ≤Ω
    
}
function canMod2() {
    isDelMode = false;
    
    // Ï∑®ÏÜå Î≤ÑÌäºÏùÑ Îã§Ïãú ÏàòÏ†ï Î≤ÑÌäºÏúºÎ°ú Î≥ÄÍ≤Ω
    const modifyButton = document.getElementById('delete');
    modifyButton.textContent = '‚ö†Ô∏è ÏÇ≠Ï†ú';
    modifyButton.onclick = delTableRow; // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º canMod Ìï®ÏàòÎ°ú Î≥ÄÍ≤Ω
    
    document.getElementById('addrow').disabled = false; // Ï∂îÍ∞Ä Î≤ÑÌäºÏùÑ Îã§Ïãú ÌôúÏÑ±Ìôî
    document.getElementById('modify').disabled = false; // ÏÇ≠Ï†ú Î≤ÑÌäº Îã§Ïãú ÌôúÏÑ±Ìôî
}
</script>

<script>
// Ï∂îÍ∞Ä - ÎπàÏπ∏Ïù¥ ÏûàÏùÑ Îïå ÏïåÎ¶º
document.addEventListener('DOMContentLoaded', function() {
    var form = document.getElementById('dataForm');

    if (form) { // ÌèºÏù¥ Ï°¥Ïû¨ÌïòÎäîÏßÄ ÌôïÏù∏
        form.addEventListener('submit', function(e) {
        	// Ìèº Ï†úÏ∂ú Ïãú ÎπàÏπ∏ÏùÑ Ï±ÑÏõåÏïº ÌïòÎäî ÏûÖÎ†• ÌïÑÎìúÎ•º ÌôïÏù∏
            if (isEditMode || isDelMode) {
                // ÏàòÏ†ï Î™®ÎìúÎÇò ÏÇ≠Ï†ú Î™®ÎìúÏùº ÎïåÎäî Ìèº Ï†úÏ∂úÏùÑ ÎßâÏßÄ ÏïäÏùå
                return;
            }
            // Î™®Îì† 'form-control' ÌÅ¥ÎûòÏä§Î•º Í∞ÄÏßÑ ÏûÖÎ†• ÌïÑÎìú Í≤ÄÏÇ¨
            var inputFields = document.querySelectorAll('.form-control');
            var isEmptyFieldPresent = Array.from(inputFields).some(function(input) {
                return input.value.trim() === ''; // ÎπÑÏñ¥ÏûàÎäî ÏûÖÎ†• ÌïÑÎìúÍ∞Ä ÏûàÎäîÏßÄ ÌôïÏù∏
            });

            if (isEmptyFieldPresent) { // ÌïòÎÇòÎùºÎèÑ ÎπÑÏñ¥ÏûàÎäî ÏûÖÎ†• ÌïÑÎìúÍ∞Ä ÏûàÏúºÎ©¥
                Swal.fire({
                	  title: "ÎπàÏπ∏ÏùÑ Ï±ÑÏõåÏ£ºÏÑ∏Ïöî.",
                	  width: 600,
                	  padding: "3em",
                	  color: "#00ff0000",
                	  background: "#fff",
                	  backdrop: `
                	    rgba(ff,ff,ff,0)
                	    left top
                	    no-repeat
                	  `
                	});
                e.preventDefault(); // Ìèº Ï†úÏ∂ú Ï§ëÎã®
            }
        });
    }
});
    
</body>
</html>